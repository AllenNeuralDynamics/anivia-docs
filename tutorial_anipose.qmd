---
title: "Tutorial: Annotate Anipose format in 3D"
toc: true
---

# Format for Anipose 3D labeling data 
- It supports an ad-hoc format that should be easy to get from your anipose labeled-data. The structure is:
  - main folder with subfolders per camera
  - files in main folder
    - CollectedData.csv - file with annotations, can be generated from group of DLC files
    - calibration.toml - calibration file generated by anipose
    - config.toml - should have camera cropping offsets (if any)
  - If you upgrade anipose to latest version (1.1.2), running anipose extract-frames  will now generate this format.
  - See example zip above

# To label in 3D:
- Open anivia: https://lambdaloop.com/anivia/
- In menu: Import > "Load Anipose Dataset"
- Select the main folder (which contains all the camera subfolders)
- Click "Toggle 3D annotation" button
- You should see multiple views and points should be green/red
- Annotation proceeds same as in 2D
  - See "Help > Getting Started"
  - If you don't have any bodyparts, specify them in Project > Edit bodyparts
- When done, in menu do: Export > Export Annotations (Anipose format)
- Save the file as "CollectedData.csv" in the main Anipose folder
  - you may need to change settings in your browser to make it prompt where to save your downloaded file

# 3D annotation features
- See all the views at once!
- You can toggle to another view by clicking on it
- Points are colored by reprojection error: green is low error, red is high error.
  - It's the mean error across all views, per point. You'll have to discern which view(s) are causing the issue.
- Project points based on other views! (this feature feels magical to me)
  - Delete points you want projected (select and press "d" or click the "x" at the top)
  - Click "Project missing points"
  - Any point visible in 2+ other views will be projected onto current view
